example_input = """...#......
.......#..
#.........
..........
......#...
.#........
.........#
..........
.......#..
#...#....."""

full_input = """.....................................................................................................#..................#......#............
...................#.........#...............................................#.........#...................#............................#...
............#.............................................#.................................................................................
.......#...............#...........#.............#.................................#............................#..................#........
..................................................................#........................................................................#
.........................................................................................#.......#..................#.......................
....#...........#.............................................#........................................#....................................
............................................................................................................................................
..........................................#....................................#...............................................#............
......................#..............................#..............................#...................................................#...
..............................................#..................#........................................................#.................
...#..............#...................................................#...................#................#........................#.......
.........................................................#..................#..................#............................................
...........#.................#....................#....................................................................#..................#.
.......................#...............................................................#........................................#...........
.#.....#........#...........................................#...........#...........................#.........#.............................
.....................................................................................................................................#......
.........................................#.........................................#..........#.........#.................#.................
.......................................................#....................#...............................................................
..................#.........#......................................#........................................................................
#...............................................#..............................................................#.................#..........
..........#............#..............................................................................#................#................#...
................................................................#.....................#.....#...............................................
...#...........#.....................#..............................................................................................#.......
...........................................#.........................#.......................................................#..............
.....................................................#......................#...............................................................
..............................................................................................#.............................................
.....................#....................................................................................#...........................#.....
............................#.......#............................................#...............................#...............#.........#
..#......#...............................................................................#.............................#....................
..................................................#...................................................#......................#..............
............................................#...............#...............................................................................
....................................................................#................#.......#..............................................
#..........................#.................................................#....................................................#.........
................................................#........................................................#.............................#....
.................................#........#..............................................#......................#...........................
.....................................................#............#....................................................#...................#
...........................................................................#................................................#...............
....#.......................................................#...............................................................................
..........#............................#..............................................#.....................................................
.......................................................#............................................#.....#...........................#.....
..................................................................................#............#...............#............................
.........................#....................#.....................#.....................................................................#.
..........................................................#...............................#..........................#......................
.................#.............#.........#........................................................#.........................#...............
..............................................................#.........................................#...................................
#..........#.....................................#..................................#........................#.......................#......
..................................#...................#...........#........#...................................................#............
...........................................#................................................................................................
........#...................................................................................................................................
.....................................................................................................................#....................#.
.#................#...........................#...........#....................#..............#...........#......................#..........
............................................................................................................................................
.......................#...............#..................................................#........#........................................
....#.........................................................#.............................................................................
....................................................................................................................................#.......
............................................................................................................#...............................
.............#.............................................................#......................................#...........#.............
.....................................#.....................................................#............#...................................
................................#.............#....................................................#.......................................#
......#..................#.............................................#..................................................#.................
..................#...................................#...........................#.................................................#.......
..............................................................................................#.............................................
...#...........................................................#............................................#...............................
............#.........#........................................................#.......................#..................................#.
..........................................#.........................................#...............................#.......#...............
............................#.....#.........................#.............................#.....#...........................................
....................................................#....................#......................................#...................#.......
..........................................................................................................#.................................
.....................#..........................................#...............................................................#...........
............................................................................................................................................
..............#..........................................................................................................................#..
.......................................#..................#........................................................#........................
.......................................................................#....................................................................
...............................................................................#...............#............................................
.........#.............#......#...............................#.....................................#.......................................
...........................................................................#......................................................#.........
.............#...........................#.......#.....................................#...................#................................
....................#................................................#................................................#....................#
..................................#...............................................#.........#...............................................
...........................#........................#....................#..................................................................
............................................#...........................................................#......#...........#...........#....
.......#.....................................................#.......................#......................................................
............................................................................................................................................
..............#........................................#...................................#.....#........................................#.
............................................................................................................................................
.........#..............#..........................................................#......................#.......................#.........
............................................................................................................................................
..........................................#......................#...................................#........................#.............
#.....#..........#........................................#....................#..........#..............................#............#.....
............................................................................................................................................
..........................................................................................................................................#.
...........................#................................................#....................................#..........................
.................................#..................................................#...................#...................................
................................................................................................................................#...........
.......#..............................#..............#......#...............................................................................
.............................#..........................................#...................................................................
..........................................#......#.........................................#................#.....#.........................
.#.....................#.................................#......#.....................................................................#.....
.....................................................................................#......................................................
......................................................................................................#.....................#...............
...................................................................#.........................#..............................................
.........................#..................#..............................................................................................#
............#......................................................................#...................................#....................
...................#..............#...................#............................................#.....#......................#......#....
.......................................#.........#......................#...................................................................
......#................#....................................................................................................................
.............................................................#..............................................................................
..............#.....................#..............................#........#.....................................#........................#
#...........................................#.....................................#......#.......#...............................#..........
...........................#............................................................................#...............#...................
.....................#...............................#......................................................................................
....#..........................#...............................................#.....#...................................................#..
......................................#.....................#...............................................................................
.............#.................................................................................................................#............
..............................................#.............................................#...............................................
.#.................................................................................................................................#........
................................#.......................................................................#...................................
..................#..............................#........................#.................................................................
........................#.................#............#.......#.....#................#.......#...........................................#.
..............#.....................................................................................#...........................#...........
......................................#.........................................................................#.......#.............#.....
..#.....#.................................................#.................#..............#................................................
......................#.......#.............................................................................................................
.......................................................................................#............................#.......................
.............#.............................#......#.........................................................................................
................................................................#..................#.................#........................#.............
..................#........#..........................................#.....................#...............................................
..........#............................#..................................................................................................#.
..................................................................................................#.........................................
..............#.......#...........#...........#........#..........#..................#......................#.............#.......#.........
.....#......................................................................................................................................
..........................................#.............................#.......................................#...........................
..........................#..............................................................................#..................................
.#............................................................#................................................................#..........#.
..................#............#..................#...................................#.....................................................
........#...............................................................................................................#...................
......................#.............#.................#...........#..........#....................#.........................................
............#......................................................................#......................#.................#........#......
..#.........................#................#............#.........................................................#......................#"""





def serialize_input(input_string):
    return [list(line) for line in input_string.split("\n")]

def expand_universe(universe):
    horizontally_expanded_universe = []
    # we expand horizontally first
    for line in universe:
        if len(set(line)) == 1 and "." in set(line):
            horizontally_expanded_universe.append(line)
        
        horizontally_expanded_universe.append(line)
        
    
    # we expand vertically
    transposed_list = [[line[i] for line in horizontally_expanded_universe] for i in range(len(horizontally_expanded_universe[0]))] 
    new_transposed_list = []
    for column in transposed_list:
        if len(set(column)) == 1 and "." in set(column):
            new_transposed_list.append(column)
        
        new_transposed_list.append(column)

    # we transpose the list back to it's original orientation 
    expanded_universe = [[line[i] for line in new_transposed_list] for i in range(len(new_transposed_list[0]))]

    return expanded_universe
            

def calculate_distances(input_universe):
    expanded_universe = expand_universe(input_universe)
    galaxy_coordinates = {}

    galaxy_number = 1
    for x in range(len(expanded_universe[0])):
        for y in range(len(expanded_universe)):
            if expanded_universe[y][x] == "#":
                galaxy_coordinates[galaxy_number] = (x,y)
                galaxy_number += 1
    
    min_distances = [] 

    for i in range(len(galaxy_coordinates)-1):
        coordinate_values = list(galaxy_coordinates.values())
        current_galaxy = coordinate_values[i]
        check_galaxies = coordinate_values[i+1:]
        lengths = [abs(current_galaxy[0] - check_galaxie[0]) + abs(current_galaxy[1] - check_galaxie[1]) for check_galaxie in check_galaxies]
        min_distances += lengths
    
    return sum(min_distances)

print(calculate_distances(serialize_input(example_input)))
print(calculate_distances(serialize_input(full_input)))
